# cython: language_level=3

import sys
sys.path.insert(0, '')

from ctypes import *
from nativelib cimport *
import nativelib as n

def foo(libHdl: n.NativeLibHdl):
    print("Do stuff in a CFUNCTYPE Python function here...")

cdef public NativeResult Getcallbacks_Cython(NativeLibHdl libHdl, CallbackParams params, NativeCallbacksHdl callbacksHdl):
    @CFUNCTYPE(None, n.NativeLibHdl)
    def python_cfunctype_callback(libHdl) -> n.NativeResult:
        foo(libHdl)

    callbacksHdl.callback = (<CallbackFunc*><size_t>(addressof(python_cfunctype_callback)))
    return RESULT_OK